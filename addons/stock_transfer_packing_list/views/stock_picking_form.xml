<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <report
                string="Packing List"
                id="action_packing_list"
                model="stock.picking"
                report_type="qweb-pdf"
                name="stock_transfer_packing_list.packing_list"
                file="stock_transfer_packing_list.packing_list"
                print_report_name="'Packing List - %s - %s' % (object.partner_id.name or '', object.name)"
        />

        <template id="packing_list">
            <t t-foreach="docs" t-as="o">
                <t t-call="stock_transfer_packing_list.packing_list_document" t-lang="o.partner_id.lang"/>
            </t>
        </template>

        <template id="packing_list_document">
            <t t-call="web.html_container">
                <t t-set="o" t-value="o.with_context(lang=o.partner_id.lang)"/>
                <t t-set="company" t-value="o.company_id"/>
                <div t-attf-class="header o_company_#{company.id}_layout">
                    <div class="o_boxed_header"
                         style="font-family: 'Lato'; color: black; font-size: 13pt; margin-bottom: 4mm">
                        <div class="row mb8">
                            <div class="first-page">
                                <div class="col-9">
                                    <div name="company_address" class="mb4">
                                        <strong>
                                            <span t-field="company.name"/>
                                        </strong>
                                        <p>
                                            <t t-if="o.picking_type_id.warehouse_id.partner_id">
                                                <t t-esc="o.picking_type_id.warehouse_id.partner_id.street"/>,
                                                <t t-esc="o.picking_type_id.warehouse_id.partner_id.city"/>,
                                                <t t-esc="o.picking_type_id.warehouse_id.partner_id.state_id.name"/>,
                                                <t t-esc="o.picking_type_id.warehouse_id.partner_id.country_id.name"/>
                                                -
                                                <t t-esc="o.picking_type_id.warehouse_id.partner_id.zip"/>
                                            </t>
                                            <t t-else="">
                                            </t>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div t-attf-class="article o_report_layout_boxed o_company_#{company.id}_layout"
                     t-att-data-oe-model="o and o._name" t-att-data-oe-id="o and o.id"
                     t-att-data-oe-lang="o and o.env.context.get('lang')">
                    <t t-call="web.address_layout"/>
                    <t t-raw="0"/>

                    <t t-set="partner"
                       t-value="o.partner_id or (o.move_lines and o.move_lines[0].partner_id) or False"/>

                    <t t-if="partner" name="partner_header">
                        <div class="row g-2 d-flex  mb10" style="font-family:'Lato'; margin-bottom: 5mm">
                            <t t-if="o.sale_id">
                                <t t-set="partner_cus" t-value="o.sale_id.partner_id"/>
                            </t>
                            <t t-else="">
                                <t t-set="partner_cus" t-value="o.move_lines[0].move_line_ids[0].owner_id or False"/>
                            </t>
                            <t t-if="partner_cus != partner" name="partner_cus_header">
                                <div style="margin-bottom: 5mm;">
                                    <strong class="col-12" style="color: black; font-size: 13pt">Kepada Yth:
                                        <br/>
                                        <span class="col-12" t-field="partner_cus.name"/>-
                                        <span class="col-12" t-field="partner_cus.ref"/>
                                    </strong>
                                    <div class="col-auto"
                                         style="color: black; font-size: 13pt; width: 95mm; text-transform: uppercase;"
                                         t-esc="partner_cus"
                                         t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;phone&quot;], &quot;no_marker&quot;: True}"/>
                                </div>
                            </t>
                            <div>
                                <strong class="col-12" style="color: black; font-size: 13pt">Alamat Kirim:
                                    <br/>
                                    <span class="col-12" t-field="o.partner_id.name"/>-
                                    <span class="col-12" t-field="o.partner_id.ref"/>
                                </strong>
                                <div class="col-auto"
                                     style="color: black; font-size: 13pt; width: 95mm; text-transform: uppercase;"
                                     t-esc="partner"
                                     t-options="{&quot;widget&quot;: &quot;contact&quot;, &quot;fields&quot;: [&quot;address&quot;, &quot;phone&quot;], &quot;no_marker&quot;: True}"/>
                            </div>
                        </div>
                    </t>

                    <div class="page mt10" style="color: black; font-family: 'Lato'; font-size: 13pt">
                        <h4>
                            <span t-field="o.name"/>
                        </h4>

                        <table class="table table-sm" style="color: black; border-color: black"
                               name="stock_move_table">
                            <thead style="border-color: black">
                                <tr>
                                    <th style="border-color: black; width:10mm" name="th_sm_product">
                                        <strong>No</strong>
                                    </th>
                                    <th style="border-color: black" name="th_sm_product">
                                        <strong>Part No</strong>
                                    </th>
                                    <th style="border-color: black" name="th_sm_product_name">
                                        <strong>Name</strong>
                                    </th>
                                    <th style="border-color: black" name="th_sm_quantity" class="text-center">
                                        <strong>Quantity</strong>
                                    </th>
                                    <th style="border-color: black" name="th_sm_uom" class="text-center">
                                        <strong>Berat (KG)</strong>
                                    </th>
                                    <th style="border-color: black" name="th_sm_uom" class="text-center">
                                        <strong>Dimensi</strong>
                                    </th>
                                </tr>
                            </thead>

                            <tbody style="color: black; border-color: black">
                                <t t-set="lines" t-value="o.move_lines.filtered(lambda x: x.product_uom_qty)"/>
                                <t t-set="line_no" t-value="0"/>

                                <tr t-foreach="lines" t-as="move">
                                    <t t-set="line_no" t-value="line_no+1"/>
                                    <td t-esc="line_no"/>
                                    <td style="border-color: black">
                                        <t t-set="grp_index" t-value="move.product_id.default_code.find('-')"/>
                                        <t t-set="grp_index" t-value="grp_index+2"/>
                                        <span style="font-size:2vw;color: black; border-color: black" class="text-wrap">
                                            <span style="" t-esc="move.product_id.default_code[grp_index:]"/>
                                        </span>
                                        <!--<span t-field="move.product_id.default_code"/>-->
                                    </td>
                                    <td style="border-color: black">
                                        <span t-field="move.product_id.name"/>
                                    </td>
                                    <td class="text-center" style="border-color: black; background-color: white">
                                        <span t-esc="int(move.product_uom_qty)"/>
                                        <span t-field="move.product_uom"/>
                                    </td>
                                    <td style="border-color: black" class="text-center">
                                        <span t-field="move.product_id.weight"/>
                                    </td>
                                    <td style="border-color: black" class="text-center">
                                        <span t-field="move.product_id.volume"/>
                                        <span>m<sup>3</sup></span>
                                    </td>

                                </tr>
                            </tbody>
                        </table>

                    </div>
                </div>
            </t>


        </template>
    </data>
</odoo>