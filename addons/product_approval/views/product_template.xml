<?xml version="1.0" encoding="utf-8"?>
<odoo>
	<data>
		<record id="product_template_form_view" model="ir.ui.view">
			<field name="name">product.template.form.inherit</field>
			<field name="model">product.template</field>
			<field name="inherit_id" ref="product.product_template_form_view" />
			<field name='priority'>20</field>
			<field name="arch" type="xml">
				<xpath expr="//header" position="inside">
					<button string="Approve" type="object" class="oe_highlight"
                    name="product_confirm"
                    attrs="{'invisible': [('state', '!=', 'draft')]}"
                    groups="product_approval.group_product_manager"/>

                    <button string="To Obselete" type="object"
                    name="product_refuse"
                    attrs="{'invisible': [('state', '!=', 'end')]}"
                    groups="product_approval.group_product_manager"/>
                    
                    <button string="Reset To Draft" type="object"
                    name="reset_to_draft_product"
                    attrs="{'invisible': [('state', '!=', 'confirmed')]}"
                    groups="product_approval.group_product_manager"/>

					<button string="To EOF" type="object"
                    name="product_eof"
                    attrs="{'invisible': [('state', '!=', 'confirmed')]}"
                    groups="product_approval.group_product_manager"/>

					<field name="state" widget="statusbar" statusbar_visible="draft,confirmed"/>
				</xpath>
			</field>
		</record>

		<record id="product_variant_easy_edit_view_inherit" model="ir.ui.view">
			<field name="name">product.product.form.inherit</field>
			<field name="model">product.product</field>
			<field name="inherit_id" ref="product.product_variant_easy_edit_view"/>
			<field name='priority'>20</field>
			<field name="arch" type="xml">
				<field name="name" position="after">
					<field name="state" invisible="1"/>
				</field>
			</field>
		</record>
		<record id="product_variant_easy_edit_view_inherit" model="ir.ui.view">
			<field name="name">product.product.form.inherit</field>
			<field name="model">product.product</field>
			<field name="inherit_id" ref="product.product_variant_easy_edit_view"/>
			<field name='priority'>20</field>
			<field name="arch" type="xml">
				<field name="name" position="after">
					<field name="state" invisible="1"/>
				</field>
			</field>
		</record>

		 <record model="ir.ui.view" id="view_purchase_form_inherit">
            <field name="name">purchase.form.inherit</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase.purchase_order_form"/>
            <field name="arch" type="xml">			
				<xpath expr="//field[@name='order_line']/tree/field[@name='product_id']" position="attributes" >
                    <attribute name="domain">
						[('state', '=', 'confirmed'),('purchase_ok', '=', True), '|', ('company_id', '=', False), ('company_id', '=', parent.company_id)]
					</attribute>
                </xpath>
			</field>
		</record>

		<record id="view_order_form_inherit" model="ir.ui.view">
			<field name="name">sale.order.form.inherit</field>
			<field name="model">sale.order</field>
			<field name="inherit_id" ref="sale.view_order_form"/>
			<field name='priority'>20</field>
			<field name="arch" type="xml">
				<xpath expr="//field[@name='order_line']/tree/field[@name='product_id']" position="attributes" >
                    <attribute name="domain">[('state', 'in', ['confirmed','end']), ('sale_ok', '=', True), '|', ('company_id', '=', False),('company_id', '=', company_id)]</attribute>
                </xpath>
			</field>
		</record>
		
	 <record id="view_inventory_form_inherit" model="ir.ui.view">
        <field name="name">stock.inventory.form.inherit</field>
        <field name="model">stock.inventory</field>
		<field name="inherit_id" ref="stock.view_inventory_form"/>
        <field name="arch" type="xml">
			<xpath expr="//field[@name='product_ids']" position="attributes" >
				<attribute name="domain">[('state', 'in', ['confirmed','end']), ('type', '=', 'product'), '|', ('company_id', '=', False),('company_id', '=', company_id)]</attribute>
            </xpath>
		</field>
	</record>
	
        <!-- record model="ir.ui.view" id="stock_picking_form_inherit">
            <field name="name">stock.picking.form.inherit</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_form"/>
            <field name="arch" type="xml">
				<xpath expr="//field[@name='move_ids_without_package']/tree/field[@name='product_id']" position="attributes" >
                    <attribute name="domain">[('state', 'in', ['confirmed','end']), ('type', 'in', ['product','consu']), '|', ('company_id', '=', False),('company_id', '=', company_id)]</attribute>
                </xpath>
				
				<xpath expr="//field[@name='move_ids_without_package']/form/group/field[@name='product_id']" position="attributes" >
                    <attribute name="domain">[('state', 'in', ['confirmed','end']), ('type', 'in', ['product','consu']), '|', ('company_id', '=', False),('company_id', '=', company_id)]</attribute>
                </xpath>
			</field>
		</record -->
	</data>
</odoo>